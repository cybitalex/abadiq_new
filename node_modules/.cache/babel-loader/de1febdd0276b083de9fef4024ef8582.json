{"ast":null,"code":"import{faCloudUploadAlt}from'@fortawesome/free-solid-svg-icons';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import axios from'axios';import React,{useState,useEffect}from'react';import{Button,Col,Form,Row}from'react-bootstrap';import{useForm}from'react-hook-form';import toast from'react-hot-toast';import swal from'sweetalert';import'./AddService.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddService=_ref=>{let{edit,setEdit,services}=_ref;const{register,handleSubmit,reset}=useForm();const[imgURL,setImgURL]=useState(null);const[service,setService]=useState({});const[isDisabled,setIsDisabled]=useState(false);const{name,price,description,img}=service||{};useEffect(()=>{const getService=services===null||services===void 0?void 0:services.find(_ref2=>{let{_id}=_ref2;return _id===edit;});setService(getService);},[edit,services]);const onSubmit=data=>{const loading=toast.loading('Uploading...');const serviceInfo={...data,img:imgURL||img};if(edit){axios.patch(\"https://immense-river-40491.herokuapp.com/updateService/\".concat(edit),serviceInfo).then(res=>{toast.dismiss(loading);if(data.name===name&&data.price===price&&data.description===description){toast.error(\"You haven't change anything\");}else{toast.success('Service updated successfully');}setEdit(null);});}else{axios.post('https://immense-river-40491.herokuapp.com/addService',serviceInfo).then(res=>{toast.dismiss(loading);if(res.data){swal('Success!','One new service added successfully','success');reset();}}).catch(error=>{toast.dismiss(loading);toast.error(error.message);});}};const handleImgUpload=event=>{const loading=toast.loading('Image uploading...');setIsDisabled(true);const imgData=new FormData();imgData.set('key','d397289afc04f776659233bc4fe00dbc');imgData.append('image',event.target.files[0]);axios.post('https://api.imgbb.com/1/upload',imgData).then(response=>{toast.dismiss(loading);toast.success('Image successfully uploaded');setImgURL(response.data.data.url);setIsDisabled(false);}).catch(error=>{toast.dismiss(loading);toast.error(error.message);});};return/*#__PURE__*/_jsx(\"div\",{className:\"px-2\",children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit(onSubmit),className:\"addServiceForm\",children:[/*#__PURE__*/_jsxs(Row,{className:\"justify-content-center px-4\",children:[/*#__PURE__*/_jsxs(Form.Group,{as:Col,md:7,children:[/*#__PURE__*/_jsx(Form.Label,{style:{fontWeight:\"bold\"},children:\"Service Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",defaultValue:name,...register(\"name\",{required:true}),placeholder:\"Your Name\"})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Col,md:5,children:[/*#__PURE__*/_jsx(Form.Label,{style:{fontWeight:\"bold\"},children:\"Price\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",defaultValue:price,...register(\"price\",{required:true}),placeholder:\"Price\"})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Col,md:7,children:[/*#__PURE__*/_jsx(Form.Label,{style:{fontWeight:\"bold\"},children:\"Description\"}),/*#__PURE__*/_jsx(Form.Control,{style:{height:\"10rem\"},type:\"text\",defaultValue:description,as:\"textarea\",...register(\"description\",{required:true}),placeholder:\"Description\"})]}),/*#__PURE__*/_jsxs(Col,{md:5,children:[/*#__PURE__*/_jsx(Form.Label,{style:{fontWeight:\"bold\",display:\"block\"},children:edit?\"Change Image\":\"Add Image\"}),/*#__PURE__*/_jsxs(Button,{as:\"label\",htmlFor:\"upload\",className:\"d-block p-2 uploadBtn\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faCloudUploadAlt,className:\"mr-2\"}),\"Upload Image\"]}),/*#__PURE__*/_jsx(Form.Control,{hidden:\"hidden\",id:\"upload\",type:\"file\",onChange:handleImgUpload})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-3\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"mainBtn\",disabled:isDisabled,children:edit?'Update':'Submit'})})]})});};export default AddService;","map":{"version":3,"names":["faCloudUploadAlt","FontAwesomeIcon","axios","React","useState","useEffect","Button","Col","Form","Row","useForm","toast","swal","jsx","_jsx","jsxs","_jsxs","AddService","_ref","edit","setEdit","services","register","handleSubmit","reset","imgURL","setImgURL","service","setService","isDisabled","setIsDisabled","name","price","description","img","getService","find","_ref2","_id","onSubmit","data","loading","serviceInfo","patch","concat","then","res","dismiss","error","success","post","catch","message","handleImgUpload","event","imgData","FormData","set","append","target","files","response","url","className","children","Group","as","md","Label","style","fontWeight","Control","type","defaultValue","required","placeholder","height","display","htmlFor","icon","hidden","id","onChange","disabled"],"sources":["/Users/alexmoran/Documents/programming/abadiq_new_page/src/component/Dashoboard/AddService/AddService.jsx"],"sourcesContent":["import { faCloudUploadAlt } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport axios from 'axios';\nimport React, { useState, useEffect } from 'react';\nimport { Button, Col, Form, Row } from 'react-bootstrap';\nimport { useForm } from 'react-hook-form';\nimport toast from 'react-hot-toast';\nimport swal from 'sweetalert';\nimport './AddService.css'\n\nconst AddService = ({edit, setEdit, services}) => {\n    const { register, handleSubmit, reset } = useForm();\n    const [imgURL, setImgURL] = useState(null);\n    const [service, setService] = useState({})\n    const [isDisabled, setIsDisabled] = useState(false);\n    const {name, price, description, img} = service || {};\n\n    useEffect(() => {\n        const getService = services?.find(({_id}) => _id === edit);\n        setService(getService)\n    }, [edit, services])\n\n    const onSubmit = data => {\n        const loading = toast.loading('Uploading...');\n        const serviceInfo = {\n            ...data,\n            img: imgURL || img\n        }\n\n        if(edit){\n            axios.patch(`https://immense-river-40491.herokuapp.com/updateService/${edit}`, serviceInfo)\n            .then(res =>{\n                toast.dismiss(loading)\n                if( data.name === name  && \n                    data.price === price &&\n                    data.description === description){\n                        toast.error(\"You haven't change anything\")\n                    }\n                    else{\n                        toast.success('Service updated successfully')\n                    }\n                setEdit(null)\n            })\n        }else{\n            axios.post('https://immense-river-40491.herokuapp.com/addService', serviceInfo)\n            .then(res => {\n                toast.dismiss(loading)\n                if(res.data){\n                    swal('Success!', 'One new service added successfully', 'success')\n                    reset()\n                }\n            })\n            .catch( error => {\n                toast.dismiss(loading)\n                toast.error(error.message)\n            });\n        }\n    }\n\n    const handleImgUpload = event => {\n        const loading = toast.loading('Image uploading...');\n        setIsDisabled(true)\n        const imgData = new FormData();\n        imgData.set('key', 'd397289afc04f776659233bc4fe00dbc');\n        imgData.append('image', event.target.files[0])\n        axios.post('https://api.imgbb.com/1/upload', imgData)\n        .then( response => {\n            toast.dismiss(loading)\n            toast.success('Image successfully uploaded')\n            setImgURL(response.data.data.url)\n            setIsDisabled(false)\n        })\n        .catch( error => {\n            toast.dismiss(loading)\n            toast.error(error.message)\n        });\n    }\n    return (\n        <div className=\"px-2\">\n            <Form onSubmit={handleSubmit(onSubmit)} className=\"addServiceForm\">\n                <Row className=\"justify-content-center px-4\">\n                    <Form.Group as={Col} md={7}>\n                        <Form.Label style={{ fontWeight: \"bold\" }}>Service Name</Form.Label>\n                        <Form.Control\n                            type=\"text\"\n                            defaultValue={name}\n                            {...register(\"name\", { required: true })}\n                            placeholder=\"Your Name\" />\n                    </Form.Group>\n                    <Form.Group as={Col} md={5}>\n                        <Form.Label style={{ fontWeight: \"bold\" }}>Price</Form.Label>\n                        <Form.Control\n                            type=\"text\"\n                            defaultValue={price}\n                            {...register(\"price\", { required: true })}\n                            placeholder=\"Price\" />\n                    </Form.Group>\n                    <Form.Group as={Col} md={7}>\n                        <Form.Label style={{ fontWeight: \"bold\" }}>Description</Form.Label>\n                        <Form.Control\n                            style={{ height: \"10rem\" }}\n                            type=\"text\"\n                            defaultValue={description}\n                            as=\"textarea\"\n                            {...register(\"description\", { required: true })}\n                            placeholder=\"Description\" />\n                    </Form.Group>\n                    <Col md={5}>\n                        <Form.Label style={{ fontWeight: \"bold\", display: \"block\"}}>{edit ? \"Change Image\": \"Add Image\"}</Form.Label>\n                        <Button\n                            as={\"label\"}\n                            htmlFor=\"upload\"\n                            className=\"d-block p-2 uploadBtn\">\n                            <FontAwesomeIcon icon={faCloudUploadAlt} className=\"mr-2\" />\n                            Upload Image\n                        </Button>\n                        <Form.Control\n                            hidden=\"hidden\"\n                            id=\"upload\"\n                            type=\"file\"\n                            onChange={handleImgUpload}\n                        />\n                    </Col>\n                </Row>\n                <div className=\"text-center mt-3\">\n                    <Button type=\"submit\" className=\"mainBtn\" disabled={isDisabled}>{edit? 'Update':'Submit'}</Button>\n                </div>\n            </Form>\n        </div>\n    );\n};\n\nexport default AddService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}