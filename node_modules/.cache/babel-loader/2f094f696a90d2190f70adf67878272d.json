{"ast":null,"code":"import{faTrashAlt}from'@fortawesome/free-regular-svg-icons';import{faEdit}from'@fortawesome/free-solid-svg-icons';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import axios from'axios';import React,{useEffect,useState}from'react';import{Table,Button}from'react-bootstrap';import toast from'react-hot-toast';import swal from'sweetalert';import{useAppContext}from'../../../context';import TableLoader from'../../Shared/TableOrder/TableOrder';import AddService from'../AddService/AddService';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ManageServices=()=>{const{state:{email}}=useAppContext();const[services,setServices]=useState([]);const[isUpdated,setIsUpdated]=useState(false);const[edit,setEdit]=useState(null);useEffect(()=>{axios.get('https://immense-river-40491.herokuapp.com/services').then(res=>{setServices(res.data);setIsUpdated(false);});},[isUpdated,edit]);const checkPermission=(id,action)=>{const getMainServices=services.slice(0,6);const getService=getMainServices.find(_ref=>{let{_id}=_ref;return id===_id;});if(getService&&email===\"test@admin.com\"){swal(\"Permission restriction!\",\"As a test admin, you can't edit or delete the main six services. You can only edit or delete your added services\",\"info\");}else{if(action==='edit'){setEdit(id);}else{handleDelete(id);}}};const handleDelete=id=>{setIsUpdated(false);swal({title:\"Are you sure?\",text:\"Are you sure! you want to delete this service?\",icon:\"warning\",buttons:true,dangerMode:true}).then(wantDelete=>{if(wantDelete){const loading=toast.loading('deleting...Please wait!');axios.delete(\"https://immense-river-40491.herokuapp.com/delete/\".concat(id)).then(res=>{toast.dismiss(loading);if(res){setIsUpdated(true);toast.success('Service has been deleted successfully!');}else{toast.error('Something went wrong, please try again');}}).catch(err=>{toast.dismiss(loading);swal({title:\"Failed!\",text:'Something went wrong, please try again',icon:\"error\"});});}});};return/*#__PURE__*/_jsx(_Fragment,{children:edit?/*#__PURE__*/_jsx(AddService,{edit:edit,setEdit:setEdit,services:services}):services.length===0?/*#__PURE__*/_jsx(TableLoader,{}):/*#__PURE__*/_jsx(\"div\",{className:\"orderList\",children:/*#__PURE__*/_jsxs(Table,{hover:true,width:\"100%\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:services.map(_ref2=>{let{_id,name,price,description}=_ref2;let des=description;// let shortDes = des.split(' ').slice(0,5).join(' ')\nreturn/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:name}),/*#__PURE__*/_jsx(\"td\",{children:des?des:\"Nothing\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",price]}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(Button,{variant:\"outline-success\",onClick:()=>checkPermission(_id,'edit'),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faEdit}),\"Edit\"]}),/*#__PURE__*/_jsxs(Button,{className:\"ml-2\",variant:\"outline-danger\",onClick:()=>checkPermission(_id,'delete'),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTrashAlt}),\"Delete\"]})]})]});})})]})})});};export default ManageServices;","map":{"version":3,"names":["faTrashAlt","faEdit","FontAwesomeIcon","axios","React","useEffect","useState","Table","Button","toast","swal","useAppContext","TableLoader","AddService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ManageServices","state","email","services","setServices","isUpdated","setIsUpdated","edit","setEdit","get","then","res","data","checkPermission","id","action","getMainServices","slice","getService","find","_ref","_id","handleDelete","title","text","icon","buttons","dangerMode","wantDelete","loading","delete","concat","dismiss","success","error","catch","err","children","length","className","hover","width","map","_ref2","name","price","description","des","variant","onClick"],"sources":["/Users/alexmoran/Documents/programming/abadiq_new_page/src/component/Dashoboard/ManageServices/ManageServices.jsx"],"sourcesContent":["import { faTrashAlt } from '@fortawesome/free-regular-svg-icons';\nimport { faEdit } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { Table, Button } from 'react-bootstrap';\nimport toast from 'react-hot-toast';\nimport swal from 'sweetalert';\nimport { useAppContext } from '../../../context';\nimport TableLoader from '../../Shared/TableOrder/TableOrder';\nimport AddService from '../AddService/AddService';\n\nconst ManageServices = () => {\n    const { state: { email }} = useAppContext()\n    const [services, setServices] = useState([])\n    const [isUpdated, setIsUpdated] = useState(false)\n    const [edit, setEdit] = useState(null);\n\n    useEffect(() => {\n        axios.get('https://immense-river-40491.herokuapp.com/services')\n        .then(res => {\n            setServices(res.data);\n            setIsUpdated(false)\n        })\n    }, [isUpdated, edit])\n    \n    const checkPermission = (id, action) => {\n        const getMainServices = services.slice(0, 6)\n        const getService = getMainServices.find(({_id}) => id === _id)\n        \n        if(getService && email === \"test@admin.com\"){\n            swal(\"Permission restriction!\",\"As a test admin, you can't edit or delete the main six services. You can only edit or delete your added services\", \"info\" )\n        } else {\n            if(action === 'edit'){\n                setEdit(id)\n            } else {\n                handleDelete(id)\n            }\n        }\n    }\n\n    const handleDelete = (id) => {\n        setIsUpdated(false)\n        swal({\n            title: \"Are you sure?\",\n            text: \"Are you sure! you want to delete this service?\",\n            icon: \"warning\",\n            buttons: true,\n            dangerMode: true,\n          })\n          .then( wantDelete => {\n            if (wantDelete) {\n                const loading = toast.loading('deleting...Please wait!')\n                axios.delete(`https://immense-river-40491.herokuapp.com/delete/${id}`)\n                .then(res => {\n                    toast.dismiss(loading)\n                    if(res){\n                        setIsUpdated(true);\n                        toast.success('Service has been deleted successfully!');\n                    }\n                    else{\n                        toast.error('Something went wrong, please try again');\n                    }\n                })\n                .catch(err => {\n                    toast.dismiss(loading)\n                    swal({\n                        title: \"Failed!\",\n                        text: 'Something went wrong, please try again',\n                        icon: \"error\",\n                      });\n                })\n            } \n          })\n    }\n\n    return (\n        <>\n        { edit ? \n            <AddService edit={edit} setEdit={setEdit} services={services}/> \n            : \n            services.length === 0 ?\n            <TableLoader/>\n            :\n           <div className=\"orderList\">\n                <Table hover width=\"100%\">\n                    <thead>\n                        <tr>\n                            <th>Name</th>\n                            <th>Description</th>\n                            <th>Price</th>\n                            <th>Action</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {\n                            services.map(({_id, name, price, description}) => {\n                                let des = description\n                                // let shortDes = des.split(' ').slice(0,5).join(' ')\n                                return(\n                                    <tr>\n                                        <td>{name}</td>\n                                        <td>{des ? des : \"Nothing\"}</td>\n                                        <td>${price}</td>\n                                        <td>\n                                            <Button variant=\"outline-success\" onClick={() => checkPermission(_id, 'edit')}> \n                                            <FontAwesomeIcon icon={faEdit}/>\n                                             Edit</Button>\n                                            <Button className=\"ml-2\" variant=\"outline-danger\" onClick={() => checkPermission(_id, 'delete')}> \n                                            <FontAwesomeIcon icon={faTrashAlt}/>\n                                             Delete</Button>\n                                        </td>\n                                    </tr>\n                                )\n                            })\n                        }\n                    </tbody>\n                </Table>\n            </div>\n        }\n        </>\n    );\n};\n\nexport default ManageServices;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}