{"ast":null,"code":"import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import axios from'axios';import{Button}from'react-bootstrap';import React,{useEffect,useState}from'react';import toast from'react-hot-toast';import swal from'sweetalert';import'./BookList.css';import{faTimesCircle}from'@fortawesome/free-solid-svg-icons';import ListSkeleton from'../../../Shared/TableOrder/ListSkeleton';import{useAppContext}from'../../../../context';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BookList=()=>{const{state:{user}}=useAppContext();const[bookings,setBookings]=useState([]);const[isUpdated,setIsUpdated]=useState(false);useEffect(()=>{axios.get(\"https://immense-river-40491.herokuapp.com/bookingList?email=\".concat(user.email)).then(res=>setBookings(res.data));},[user.email,isUpdated]);const handleDelete=(id,status)=>{setIsUpdated(false);swal({title:\"\".concat(status==='Done'?\"Remove\":\"Cancel\",\" Booking?\"),text:\"Are you sure! you want to \".concat(status==='Done'?\"remove booking from your booking List\":\"cancel\",\"?\"),icon:\"warning\",buttons:true,dangerMode:true}).then(wantDelete=>{if(wantDelete){const loading=toast.loading('deleting...Please wait!');axios.delete(\"https://immense-river-40491.herokuapp.com/deleteOrder/\".concat(id)).then(res=>{toast.dismiss(loading);if(res){setIsUpdated(true);toast.success('Your Booking is successfully canceled!');}else{toast.error('Something went wrong, please try again');}}).catch(err=>{toast.dismiss(loading);swal({title:\"Failed!\",text:'Something went wrong, please try again',icon:\"error\"});});}});};return/*#__PURE__*/_jsxs(\"div\",{children:[bookings.length===0&&/*#__PURE__*/_jsx(ListSkeleton,{}),/*#__PURE__*/_jsx(\"div\",{className:\"row px-3\",children:bookings.map(_ref=>{let{_id,serviceName,status,description,img}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bookingList\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"img\",{src:img,alt:\"\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"serviceState\",style:{color:'#fff',background:status==='Pending'?'rgb(255 78 96)':status==='On going'?'rgb(73 146 255)':'rgb(31 204 123)'},children:status})})]}),/*#__PURE__*/_jsx(\"h6\",{children:serviceName}),/*#__PURE__*/_jsx(\"p\",{children:description}),/*#__PURE__*/_jsxs(Button,{variant:\"outline-danger\",onClick:()=>handleDelete(_id,status),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTimesCircle}),status==='Done'?'Remove':'Cancel']})]})},_id);})})]});};export default BookList;","map":{"version":3,"names":["FontAwesomeIcon","axios","Button","React","useEffect","useState","toast","swal","faTimesCircle","ListSkeleton","useAppContext","jsx","_jsx","jsxs","_jsxs","BookList","state","user","bookings","setBookings","isUpdated","setIsUpdated","get","concat","email","then","res","data","handleDelete","id","status","title","text","icon","buttons","dangerMode","wantDelete","loading","delete","dismiss","success","error","catch","err","children","length","className","map","_ref","_id","serviceName","description","img","src","alt","style","color","background","variant","onClick"],"sources":["/Users/alexmoran/Documents/programming/abadiq_new_page/src/component/Dashoboard/UserDashboard/BookList/BookList.jsx"],"sourcesContent":["import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport axios from 'axios';\nimport { Button } from 'react-bootstrap';\nimport React, { useEffect, useState } from 'react';\nimport toast from 'react-hot-toast';\nimport swal from 'sweetalert';\nimport './BookList.css'\nimport { faTimesCircle } from '@fortawesome/free-solid-svg-icons';\nimport ListSkeleton from '../../../Shared/TableOrder/ListSkeleton';\nimport { useAppContext } from '../../../../context';\n\nconst BookList = () => {\n    const { state:{user} } =useAppContext();\n    const [bookings, setBookings] = useState([]);\n    const [isUpdated, setIsUpdated] = useState(false);\n\n    useEffect(() => {\n        axios.get(`https://immense-river-40491.herokuapp.com/bookingList?email=${user.email}`)\n        .then(res => setBookings(res.data))\n    },[user.email, isUpdated])\n\n    const handleDelete = (id, status) => {\n        setIsUpdated(false)\n        swal({\n            title: `${status === 'Done' ? \"Remove\" : \"Cancel\"} Booking?`,\n            text: `Are you sure! you want to ${status === 'Done' ? \"remove booking from your booking List\" : \"cancel\"}?`,\n            icon: \"warning\",\n            buttons: true,\n            dangerMode: true,\n          })\n          .then( wantDelete => {\n            if (wantDelete) {\n                const loading = toast.loading('deleting...Please wait!')\n                axios.delete(`https://immense-river-40491.herokuapp.com/deleteOrder/${id}`)\n                .then(res => {\n                    toast.dismiss(loading)\n                    if(res){\n                        setIsUpdated(true);\n                        toast.success('Your Booking is successfully canceled!');\n                    }\n                    else{\n                        toast.error('Something went wrong, please try again');\n                    }\n                })\n                .catch(err => {\n                    toast.dismiss(loading)\n                    swal({\n                        title: \"Failed!\",\n                        text: 'Something went wrong, please try again',\n                        icon: \"error\",\n                      });\n                })\n            } \n          });\n    }\n    return (\n        <div>\n            {bookings.length === 0 && <ListSkeleton/>}\n            <div className=\"row px-3\">\n                {\n                    bookings.map(({_id, serviceName,status,description,img}) => {\n                        return(<div className=\"col-md-4\" key={_id}>\n                            <div className=\"bookingList\">\n                                <div className=\"d-flex justify-content-between\">\n                                    <img src={img} alt=\"\"/>\n                                    <div>\n                                        <p className=\"serviceState\" style={{color: '#fff', background: status === 'Pending' ? 'rgb(255 78 96)' : status === 'On going' ? 'rgb(73 146 255)' :'rgb(31 204 123)'}}>{status}</p>\n                                    </div>\n                                </div>\n                                <h6>{serviceName}</h6>\n                                <p>{description}</p>\n                                <Button variant=\"outline-danger\" onClick={() => handleDelete(_id, status)}> \n                                    <FontAwesomeIcon icon={faTimesCircle}/>\n                                     { status === 'Done' ? 'Remove':'Cancel'}\n                                </Button>\n                            </div>\n                        </div>)\n                    })\n                }\n            </div>\n        </div>\n    );\n};\n\nexport default BookList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}