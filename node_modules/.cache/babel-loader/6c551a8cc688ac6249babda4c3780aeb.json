{"ast":null,"code":"import axios from'axios';import React,{useState}from'react';import{useEffect}from'react';import{useForm}from'react-hook-form';import{useParams,useNavigate}from'react-router-dom';import toast from'react-hot-toast';import{Button,Col,Form,Row}from'react-bootstrap';import swal from'sweetalert';import{useAppContext}from'../../../../context';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ReviewForm=_ref=>{let{setIsUpdated}=_ref;const{state:{user:{email,img}}}=useAppContext();const{id}=useParams();const{register,handleSubmit,reset}=useForm();const[review,setReview]=useState({});const{name,address,description}=review;useEffect(()=>{axios(\"https://immense-river-40491.herokuapp.com/userReview/\".concat(id)).then(res=>{setReview(res.data[0]);});},[id]);const history=useNavigate();const onSubmit=data=>{const loading=toast.loading('Uploading...Please wait!');const reviewData={...data};reviewData.email=review.email||email;reviewData.img=review.img||img;if(id){axios.patch(\"https://immense-river-40491.herokuapp.com/updateReview/\".concat(id),reviewData).then(res=>{if(res){toast.dismiss(loading);if(data.name===name&&data.address===address&&data.description===description){toast.error(\"You haven't changed anything\");}else{toast.success('your review was successful updated!');}history('/dashboard/review');}});}else{setIsUpdated(false);axios.post('https://immense-river-40491.herokuapp.com/addReview',reviewData).then(res=>{if(res){setIsUpdated(true);toast.dismiss(loading);swal(\"Success!\",\"Your review has been submitted successfully. We appreciate your contirbution.\",\"success\");}});}reset();};return/*#__PURE__*/_jsx(\"section\",{className:\"px-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto reviewForm\",children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit(onSubmit),className:\"w-100\",children:[/*#__PURE__*/_jsxs(Row,{className:\"justify-content-center px-4\",children:[/*#__PURE__*/_jsxs(Form.Group,{as:Col,md:12,children:[/*#__PURE__*/_jsx(Form.Label,{style:{fontWeight:\"bold\"},children:\"Your Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",defaultValue:name||\"\",...register(\"name\",{required:true}),placeholder:\"Your Name\"})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Col,md:12,children:[/*#__PURE__*/_jsx(Form.Label,{style:{fontWeight:\"bold\"},children:\"Address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",defaultValue:address||\"\",...register(\"address\",{required:true}),placeholder:\"Address\"})]}),/*#__PURE__*/_jsxs(Form.Group,{as:Col,md:12,children:[/*#__PURE__*/_jsx(Form.Label,{style:{fontWeight:\"bold\"},children:\"Description\"}),/*#__PURE__*/_jsx(Form.Control,{style:{height:\"10rem\"},type:\"text\",defaultValue:description||\"\",as:\"textarea\",...register(\"description\",{required:true}),placeholder:\"Description\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-1\",children:/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"mainBtn\",children:id?'update':'submit'})})]})})});};export default ReviewForm;","map":{"version":3,"names":["axios","React","useState","useEffect","useForm","useParams","useNavigate","toast","Button","Col","Form","Row","swal","useAppContext","jsx","_jsx","jsxs","_jsxs","ReviewForm","_ref","setIsUpdated","state","user","email","img","id","register","handleSubmit","reset","review","setReview","name","address","description","concat","then","res","data","history","onSubmit","loading","reviewData","patch","dismiss","error","success","post","className","children","Group","as","md","Label","style","fontWeight","Control","type","defaultValue","required","placeholder","height"],"sources":["/Users/alexmoran/Documents/programming/abadiq_new_page/src/component/Dashoboard/UserDashboard/AddReview/ReviewFrom.jsx"],"sourcesContent":["import axios from 'axios';\nimport React, { useState } from 'react';\nimport { useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useParams,useNavigate  } from 'react-router-dom';\nimport toast from 'react-hot-toast';\nimport { Button, Col, Form, Row } from 'react-bootstrap';\nimport swal from 'sweetalert';\nimport { useAppContext } from '../../../../context';\n\nconst ReviewForm = ({setIsUpdated}) => {\n    const {state:{user: {email, img}}} = useAppContext()\n    const {id} = useParams();\n    const { register, handleSubmit, reset } = useForm();\n    const [review, setReview] = useState({});\n    const {name, address, description} = review;\n    useEffect(() => {\n        axios(`https://immense-river-40491.herokuapp.com/userReview/${id}`)\n        .then(res => {\n            setReview(res.data[0]);\n        })\n    }, [id])\n    \n    const history = useNavigate ();\n    const onSubmit = data => {\n        const loading = toast.loading('Uploading...Please wait!');\n        const reviewData = {...data};\n            reviewData.email = review.email || email;\n            reviewData.img = review.img || img;\n        if(id){\n            axios.patch(`https://immense-river-40491.herokuapp.com/updateReview/${id}`, reviewData)\n            \n            .then(res => {\n                if(res){\n                    toast.dismiss(loading);\n                    if(\n                        data.name === name &&\n                        data.address === address &&\n                        data.description === description\n                        ){\n                            toast.error(\"You haven't changed anything\")\n                        }else{\n                            toast.success('your review was successful updated!');\n                        }\n                        history('/dashboard/review');\n                }\n            })\n        }else {\n            setIsUpdated(false)\n            axios.post('https://immense-river-40491.herokuapp.com/addReview', reviewData)\n            .then(res => {\n                if(res){\n                    setIsUpdated(true)\n                    toast.dismiss(loading);\n                    swal(\"Success!\", \"Your review has been submitted successfully. We appreciate your contirbution.\", \"success\");\n                }\n            })\n        }\n        reset();\n    }\n    return (\n        <section className='px-3'>\n            <div className=\"mx-auto reviewForm\">\n                <Form onSubmit={handleSubmit(onSubmit)} className=\"w-100\">\n                        <Row className=\"justify-content-center px-4\">\n                            <Form.Group as={Col} md={12}>\n                                <Form.Label style={{ fontWeight: \"bold\" }}>Your Name</Form.Label>\n                                <Form.Control\n                                    type=\"text\"\n                                    defaultValue={name || \"\"}\n                                    {...register(\"name\", { required: true })}\n                                    placeholder=\"Your Name\" />\n                            </Form.Group>\n                            <Form.Group as={Col} md={12}>\n                                <Form.Label style={{ fontWeight: \"bold\" }}>Address</Form.Label>\n                                <Form.Control\n                                    type=\"text\"\n                                    defaultValue={address || \"\"}\n                                    {...register(\"address\", { required: true })}\n                                    placeholder=\"Address\" />\n                            </Form.Group>\n                            <Form.Group as={Col} md={12}>\n                                <Form.Label style={{ fontWeight: \"bold\" }}>Description</Form.Label>\n                                <Form.Control\n                                    style={{ height: \"10rem\" }}\n                                    type=\"text\"\n                                    defaultValue={description || \"\"}\n                                    as=\"textarea\"\n                                    {...register(\"description\", { required: true })}\n                                    placeholder=\"Description\" />\n                            </Form.Group>\n                        </Row>\n                        <div className=\"text-center mt-1\">\n                            <Button type=\"submit\" className=\"mainBtn\">\n                                {id ? 'update': 'submit'}\n                            </Button>\n                        </div>\n                </Form>\n            </div>\n        </section>\n    );\n};\n\nexport default ReviewForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}