{"ast":null,"code":"var _jsxFileName = \"/root/abadiq_new/src/component/Dashoboard/ManageServices/ManageServices.jsx\",\n  _s = $RefreshSig$();\nimport { faTrashAlt } from '@fortawesome/free-regular-svg-icons';\nimport { faEdit } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { Table, Button } from 'react-bootstrap';\nimport toast from 'react-hot-toast';\nimport swal from 'sweetalert';\nimport { useAppContext } from '../../../context';\nimport TableLoader from '../../Shared/TableOrder/TableOrder';\nimport AddService from '../AddService/AddService';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ManageServices = () => {\n  _s();\n  const {\n    state: {\n      email\n    }\n  } = useAppContext();\n  const [services, setServices] = useState([]);\n  const [isUpdated, setIsUpdated] = useState(false);\n  const [edit, setEdit] = useState(null);\n  useEffect(() => {\n    axios.get('https://immense-river-40491.herokuapp.com/services').then(res => {\n      setServices(res.data);\n      setIsUpdated(false);\n    });\n  }, [isUpdated, edit]);\n  const checkPermission = (id, action) => {\n    const getMainServices = services.slice(0, 6);\n    const getService = getMainServices.find(({\n      _id\n    }) => id === _id);\n    if (getService && email === \"test@admin.com\") {\n      swal(\"Permission restriction!\", \"As a test admin, you can't edit or delete the main six services. You can only edit or delete your added services\", \"info\");\n    } else {\n      if (action === 'edit') {\n        setEdit(id);\n      } else {\n        handleDelete(id);\n      }\n    }\n  };\n  const handleDelete = id => {\n    setIsUpdated(false);\n    swal({\n      title: \"Are you sure?\",\n      text: \"Are you sure! you want to delete this service?\",\n      icon: \"warning\",\n      buttons: true,\n      dangerMode: true\n    }).then(wantDelete => {\n      if (wantDelete) {\n        const loading = toast.loading('deleting...Please wait!');\n        axios.delete(`https://immense-river-40491.herokuapp.com/delete/${id}`).then(res => {\n          toast.dismiss(loading);\n          if (res) {\n            setIsUpdated(true);\n            toast.success('Service has been deleted successfully!');\n          } else {\n            toast.error('Something went wrong, please try again');\n          }\n        }).catch(err => {\n          toast.dismiss(loading);\n          swal({\n            title: \"Failed!\",\n            text: 'Something went wrong, please try again',\n            icon: \"error\"\n          });\n        });\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: edit ? /*#__PURE__*/_jsxDEV(AddService, {\n      edit: edit,\n      setEdit: setEdit,\n      services: services\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this) : services.length === 0 ? /*#__PURE__*/_jsxDEV(TableLoader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"orderList\",\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        hover: true,\n        width: \"100%\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Price\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Action\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: services.map(({\n            _id,\n            name,\n            price,\n            description\n          }) => {\n            let des = description;\n            // let shortDes = des.split(' ').slice(0,5).join(' ')\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: des ? des : \"Nothing\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\"$\", price]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outline-success\",\n                  onClick: () => checkPermission(_id, 'edit'),\n                  children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                    icon: faEdit\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 107,\n                    columnNumber: 45\n                  }, this), \"Edit\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  className: \"ml-2\",\n                  variant: \"outline-danger\",\n                  onClick: () => checkPermission(_id, 'delete'),\n                  children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                    icon: faTrashAlt\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 110,\n                    columnNumber: 45\n                  }, this), \"Delete\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 37\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 12\n    }, this)\n  }, void 0, false);\n};\n_s(ManageServices, \"mGWWj3hCF73QQ+LHWiiFebtA3iY=\", false, function () {\n  return [useAppContext];\n});\n_c = ManageServices;\nexport default ManageServices;\nvar _c;\n$RefreshReg$(_c, \"ManageServices\");","map":{"version":3,"names":["faTrashAlt","faEdit","FontAwesomeIcon","axios","React","useEffect","useState","Table","Button","toast","swal","useAppContext","TableLoader","AddService","jsxDEV","_jsxDEV","Fragment","_Fragment","ManageServices","_s","state","email","services","setServices","isUpdated","setIsUpdated","edit","setEdit","get","then","res","data","checkPermission","id","action","getMainServices","slice","getService","find","_id","handleDelete","title","text","icon","buttons","dangerMode","wantDelete","loading","delete","dismiss","success","error","catch","err","children","fileName","_jsxFileName","lineNumber","columnNumber","length","className","hover","width","map","name","price","description","des","variant","onClick","_c","$RefreshReg$"],"sources":["/root/abadiq_new/src/component/Dashoboard/ManageServices/ManageServices.jsx"],"sourcesContent":["import { faTrashAlt } from '@fortawesome/free-regular-svg-icons';\nimport { faEdit } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { Table, Button } from 'react-bootstrap';\nimport toast from 'react-hot-toast';\nimport swal from 'sweetalert';\nimport { useAppContext } from '../../../context';\nimport TableLoader from '../../Shared/TableOrder/TableOrder';\nimport AddService from '../AddService/AddService';\n\nconst ManageServices = () => {\n    const { state: { email }} = useAppContext()\n    const [services, setServices] = useState([])\n    const [isUpdated, setIsUpdated] = useState(false)\n    const [edit, setEdit] = useState(null);\n\n    useEffect(() => {\n        axios.get('https://immense-river-40491.herokuapp.com/services')\n        .then(res => {\n            setServices(res.data);\n            setIsUpdated(false)\n        })\n    }, [isUpdated, edit])\n    \n    const checkPermission = (id, action) => {\n        const getMainServices = services.slice(0, 6)\n        const getService = getMainServices.find(({_id}) => id === _id)\n        \n        if(getService && email === \"test@admin.com\"){\n            swal(\"Permission restriction!\",\"As a test admin, you can't edit or delete the main six services. You can only edit or delete your added services\", \"info\" )\n        } else {\n            if(action === 'edit'){\n                setEdit(id)\n            } else {\n                handleDelete(id)\n            }\n        }\n    }\n\n    const handleDelete = (id) => {\n        setIsUpdated(false)\n        swal({\n            title: \"Are you sure?\",\n            text: \"Are you sure! you want to delete this service?\",\n            icon: \"warning\",\n            buttons: true,\n            dangerMode: true,\n          })\n          .then( wantDelete => {\n            if (wantDelete) {\n                const loading = toast.loading('deleting...Please wait!')\n                axios.delete(`https://immense-river-40491.herokuapp.com/delete/${id}`)\n                .then(res => {\n                    toast.dismiss(loading)\n                    if(res){\n                        setIsUpdated(true);\n                        toast.success('Service has been deleted successfully!');\n                    }\n                    else{\n                        toast.error('Something went wrong, please try again');\n                    }\n                })\n                .catch(err => {\n                    toast.dismiss(loading)\n                    swal({\n                        title: \"Failed!\",\n                        text: 'Something went wrong, please try again',\n                        icon: \"error\",\n                      });\n                })\n            } \n          })\n    }\n\n    return (\n        <>\n        { edit ? \n            <AddService edit={edit} setEdit={setEdit} services={services}/> \n            : \n            services.length === 0 ?\n            <TableLoader/>\n            :\n           <div className=\"orderList\">\n                <Table hover width=\"100%\">\n                    <thead>\n                        <tr>\n                            <th>Name</th>\n                            <th>Description</th>\n                            <th>Price</th>\n                            <th>Action</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        {\n                            services.map(({_id, name, price, description}) => {\n                                let des = description\n                                // let shortDes = des.split(' ').slice(0,5).join(' ')\n                                return(\n                                    <tr>\n                                        <td>{name}</td>\n                                        <td>{des ? des : \"Nothing\"}</td>\n                                        <td>${price}</td>\n                                        <td>\n                                            <Button variant=\"outline-success\" onClick={() => checkPermission(_id, 'edit')}> \n                                            <FontAwesomeIcon icon={faEdit}/>\n                                             Edit</Button>\n                                            <Button className=\"ml-2\" variant=\"outline-danger\" onClick={() => checkPermission(_id, 'delete')}> \n                                            <FontAwesomeIcon icon={faTrashAlt}/>\n                                             Delete</Button>\n                                        </td>\n                                    </tr>\n                                )\n                            })\n                        }\n                    </tbody>\n                </Table>\n            </div>\n        }\n        </>\n    );\n};\n\nexport default ManageServices;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}