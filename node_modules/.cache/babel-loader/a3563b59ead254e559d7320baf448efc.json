{"ast":null,"code":"import React,{useMemo}from'react';import{useStripe,useElements,CardNumberElement,CardCvcElement,CardExpiryElement}from'@stripe/react-stripe-js';import swal from'sweetalert';import{Form,Col,Row}from'react-bootstrap';import{useForm}from'react-hook-form';import toast from'react-hot-toast';import axios from'axios';import{useAppContext}from'../../../../context';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const useOptions=()=>{const options=useMemo(()=>({style:{base:{fontSize:\"1.2rem\",lineHeight:\"2\",color:\"#495057\",letterSpacing:\"0.025em\",\"::placeholder\":{color:\"#aab7c4\"}},invalid:{color:\"#9e2146\"}}}),[]);return options;};const Checkout=()=>{const{state:{user,selectedService:{name,img,_id,description,price}}}=useAppContext();const stripe=useStripe();const elements=useElements();const options=useOptions();const{register,handleSubmit,reset}=useForm();const onSubmit=async data=>{if(!stripe||!elements){return;}const loading=toast.loading('Please wait...!');const{error,paymentMethod}=await stripe.createPaymentMethod({type:\"card\",card:elements.getElement(CardNumberElement)});if(error){toast.dismiss(loading);return swal(\"Failed!\",error.message,\"error\",{dangerMode:true});}else{const orderData={...data,paymentMethod:\"card\",paymentId:paymentMethod.id,status:\"Pending\",serviceId:_id,serviceName:name,description:description,img:img,price:price};axios.post('https://immense-river-40491.herokuapp.com/addOrder',orderData).then(res=>{toast.dismiss(loading);swal(\"Congratulation!\",\"Your order has been placed successfully\",\"success\");reset();}).catch(err=>{toast.dismiss(loading);swal(\"Failed!\",\"Something went wrong! please try again\",\"error\");});}};return/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:6,xs:12,children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{style:{fontWeight:\"bold\"},children:\"Your Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",defaultValue:user.name,...register(\"name\",{required:true}),placeholder:\"Your Name\"})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{style:{fontWeight:\"bold\"},children:\"Email\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",defaultValue:user.email,...register(\"email\",{required:true}),placeholder:\"Email Address\"})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{style:{fontWeight:\"bold\"},children:\"Address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",...register(\"address\",{required:true}),placeholder:\"Address\"})]})]}),/*#__PURE__*/_jsxs(Col,{md:6,xs:12,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Form.Label,{style:{fontWeight:\"bold\"},children:\"Card Number\"}),/*#__PURE__*/_jsx(CardNumberElement,{className:\"form-control\",options:options})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(Form.Label,{style:{fontWeight:\"bold\"},children:\"Expiration Date\"}),/*#__PURE__*/_jsx(CardExpiryElement,{className:\"form-control\",options:options})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(Form.Label,{style:{fontWeight:\"bold\"},children:\"CVC\"}),/*#__PURE__*/_jsx(CardCvcElement,{className:\"form-control\",options:options})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"button\",{className:\"mainBtn mt-4\",type:\"submit\",disabled:!stripe,children:\"Pay Now\"})})]});};export default Checkout;","map":{"version":3,"names":["React","useMemo","useStripe","useElements","CardNumberElement","CardCvcElement","CardExpiryElement","swal","Form","Col","Row","useForm","toast","axios","useAppContext","jsx","_jsx","jsxs","_jsxs","useOptions","options","style","base","fontSize","lineHeight","color","letterSpacing","invalid","Checkout","state","user","selectedService","name","img","_id","description","price","stripe","elements","register","handleSubmit","reset","onSubmit","data","loading","error","paymentMethod","createPaymentMethod","type","card","getElement","dismiss","message","dangerMode","orderData","paymentId","id","status","serviceId","serviceName","post","then","res","catch","err","children","md","xs","Group","Label","fontWeight","Control","defaultValue","required","placeholder","email","className","disabled"],"sources":["/Users/alexmoran/Documents/programming/abadiq_new_page/src/component/Dashoboard/UserDashboard/Book/Checkout.jsx"],"sourcesContent":["import React, { useMemo } from 'react'\nimport {\n  useStripe,\n  useElements,\n  CardNumberElement,\n  CardCvcElement,\n  CardExpiryElement\n} from '@stripe/react-stripe-js';\nimport swal from 'sweetalert';\nimport { Form, Col, Row } from 'react-bootstrap';\nimport { useForm } from 'react-hook-form';\nimport toast from 'react-hot-toast';\nimport axios from 'axios';\nimport { useAppContext } from '../../../../context';\n\n\nconst useOptions = () => {\n  const options = useMemo(() => ({\n    style: {\n      base: {\n        fontSize: \"1.2rem\",\n        lineHeight: \"2\",\n        color: \"#495057\",\n        letterSpacing: \"0.025em\",\n        \"::placeholder\": {\n          color: \"#aab7c4\"\n        }\n      },\n      invalid: {\n        color: \"#9e2146\"\n      }\n    }\n  }), []);\n  return options;\n};\n\nconst Checkout = () => {\n  const { state: { user, selectedService: { name, img, _id, description, price } } } = useAppContext();\n  const stripe = useStripe();\n  const elements = useElements();\n  const options = useOptions();\n  const { register, handleSubmit, reset } = useForm();\n  const onSubmit = async data => {\n    if (!stripe || !elements) {\n      return;\n    }\n    const loading = toast.loading('Please wait...!');\n\n    const { error, paymentMethod } = await stripe.createPaymentMethod({\n      type: \"card\",\n      card: elements.getElement(CardNumberElement)\n    });\n\n    if (error) {\n      toast.dismiss(loading);\n      return swal(\"Failed!\", error.message, \"error\", { dangerMode: true });\n    }\n    else {\n      const orderData = {\n        ...data,\n        paymentMethod: \"card\",\n        paymentId: paymentMethod.id,\n        status: \"Pending\",\n        serviceId: _id,\n        serviceName: name,\n        description: description,\n        img: img,\n        price: price\n      }\n      axios.post('https://immense-river-40491.herokuapp.com/addOrder', orderData)\n        .then(res => {\n          toast.dismiss(loading);\n          swal(\"Congratulation!\", \"Your order has been placed successfully\", \"success\");\n          reset();\n        })\n        .catch(err => {\n          toast.dismiss(loading);\n          swal(\"Failed!\", \"Something went wrong! please try again\", \"error\")\n        })\n    }\n  };\n\n  return (\n    <Form onSubmit={handleSubmit(onSubmit)}>\n      <Row>\n        <Col md={6} xs={12}>\n          <Form.Group>\n            <Form.Label style={{ fontWeight: \"bold\" }}>Your Name</Form.Label>\n            <Form.Control\n              type=\"text\"\n              defaultValue={user.name}\n              {...register(\"name\", { required: true })}\n              placeholder=\"Your Name\" />\n          </Form.Group>\n\n          <Form.Group>\n            <Form.Label style={{ fontWeight: \"bold\" }}>Email</Form.Label>\n            <Form.Control\n              type=\"text\"\n              defaultValue={user.email}\n              {...register(\"email\", { required: true })}\n              placeholder=\"Email Address\" />\n          </Form.Group>\n\n          <Form.Group>\n            <Form.Label style={{ fontWeight: \"bold\" }}>Address</Form.Label>\n            <Form.Control\n              type=\"text\"\n              {...register(\"address\", { required: true })}\n              placeholder=\"Address\" />\n          </Form.Group>\n        </Col>\n        <Col md={6} xs={12}>\n          <div>\n            <Form.Label style={{ fontWeight: \"bold\" }}>Card Number</Form.Label>\n            <CardNumberElement className=\"form-control\" options={options} />\n          </div>\n          <div className=\"mt-3\">\n            <Form.Label style={{ fontWeight: \"bold\" }}>Expiration Date</Form.Label>\n            <CardExpiryElement className=\"form-control\" options={options} />\n          </div>\n          <div className=\"mt-3\">\n            <Form.Label style={{ fontWeight: \"bold\" }}>CVC</Form.Label>\n            <CardCvcElement className=\"form-control\" options={options} />\n          </div>\n        </Col>\n      </Row>\n      <div className=\"text-center\">\n        <button className=\"mainBtn mt-4\" type=\"submit\" disabled={!stripe}>Pay Now</button>\n      </div>\n    </Form>\n  );\n};\n\nexport default Checkout;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}