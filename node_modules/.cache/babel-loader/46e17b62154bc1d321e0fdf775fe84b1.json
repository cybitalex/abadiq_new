{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Button}from'react-bootstrap';import ReviewForm from'./ReviewFrom';import'./Review.css';import{Link}from'react-router-dom';import userImg from\"../../../../Assets/user.svg\";import axios from'axios';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faTrashAlt}from'@fortawesome/free-solid-svg-icons';import{faEdit}from'@fortawesome/free-regular-svg-icons';import toast from'react-hot-toast';import swal from'sweetalert';import{useAppContext}from'../../../../context';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Review=()=>{const{state:{user:{email,img}}}=useAppContext();const[review,setReview]=useState({});const[isUpdated,setIsUpdated]=useState(false);const{_id,name,address,description}=review||{};useEffect(()=>{axios(\"https://immense-river-40491.herokuapp.com/userReview?email=\".concat(email)).then(res=>{setReview(res.data[0]);});},[email,isUpdated]);const handleDelete=id=>{setIsUpdated(false);swal({title:\"Are you sure?\",text:\"Are you sure! you want to delete the review?\",icon:\"warning\",buttons:true,dangerMode:true}).then(wantDelete=>{if(wantDelete){const loading=toast.loading('deleting...Please wait!');axios.delete(\"https://immense-river-40491.herokuapp.com/deleteReview/\".concat(id)).then(res=>{toast.dismiss(loading);if(res){setIsUpdated(true);toast.success('Your review has been deleted successfully!');}else{toast.error('Something went wrong, please try again');}}).catch(err=>{toast.dismiss(loading);swal({title:\"Failed!\",text:'Something went wrong, please try again',icon:\"error\"});});}});};return/*#__PURE__*/_jsx(\"div\",{children:description?/*#__PURE__*/_jsxs(\"div\",{className:\"userReviewBox\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"review col-md-6 mx-auto\",children:[img?/*#__PURE__*/_jsx(\"img\",{src:img,alt:\"\"}):/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(userImg),alt:\"\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"testimonialName\",children:name}),/*#__PURE__*/_jsx(\"h6\",{className:\"testimonialAddress\",children:address}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"i\",{children:description})})]}),/*#__PURE__*/_jsxs(Button,{as:Link,to:\"/dashboard/review/\".concat(_id),variant:\"outline-success\",children:[\" \",/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faEdit}),\" Edit\"]}),/*#__PURE__*/_jsxs(Button,{variant:\"outline-danger\",onClick:()=>handleDelete(_id),children:[\" \",/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTrashAlt}),\" Delete\"]})]}):/*#__PURE__*/_jsx(ReviewForm,{setIsUpdated:setIsUpdated})});};export default Review;","map":{"version":3,"names":["React","useEffect","useState","Button","ReviewForm","Link","userImg","axios","FontAwesomeIcon","faTrashAlt","faEdit","toast","swal","useAppContext","jsx","_jsx","jsxs","_jsxs","Review","state","user","email","img","review","setReview","isUpdated","setIsUpdated","_id","name","address","description","concat","then","res","data","handleDelete","id","title","text","icon","buttons","dangerMode","wantDelete","loading","delete","dismiss","success","error","catch","err","children","className","src","alt","as","to","variant","onClick"],"sources":["/Users/alexmoran/Documents/programming/abadiq_new_page/src/component/Dashoboard/UserDashboard/AddReview/Review.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Button } from 'react-bootstrap';\nimport ReviewForm from './ReviewFrom';\nimport './Review.css';\nimport { Link } from 'react-router-dom';\nimport userImg from '../../../../Assets/user.svg';\nimport axios from 'axios';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrashAlt } from '@fortawesome/free-solid-svg-icons';\nimport { faEdit } from '@fortawesome/free-regular-svg-icons';\nimport toast from 'react-hot-toast';\nimport swal from 'sweetalert';\nimport { useAppContext } from '../../../../context';\n\n\nconst Review = () => {\n    const { state: { user: { email, img } } } = useAppContext();\n    const [review, setReview] = useState({});\n    const [isUpdated, setIsUpdated] = useState(false)\n    const {_id, name, address, description} = review || {};\n    useEffect(() => {\n        axios(`https://immense-river-40491.herokuapp.com/userReview?email=${email}`)\n        .then(res => {\n            setReview(res.data[0]);\n        })\n    }, [email, isUpdated])\n\n    const handleDelete = (id) => {\n        setIsUpdated(false)\n        swal({\n            title: \"Are you sure?\",\n            text: \"Are you sure! you want to delete the review?\",\n            icon: \"warning\",\n            buttons: true,\n            dangerMode: true,\n          })\n          .then( wantDelete => {\n            if (wantDelete) {\n                const loading = toast.loading('deleting...Please wait!')\n                axios.delete(`https://immense-river-40491.herokuapp.com/deleteReview/${id}`)\n                .then(res => {\n                    toast.dismiss(loading)\n                    if(res){\n                        setIsUpdated(true);\n                        toast.success('Your review has been deleted successfully!');\n                    }\n                    else{\n                        toast.error('Something went wrong, please try again');\n                    }\n                })\n                .catch(err => {\n                    toast.dismiss(loading)\n                    swal({\n                        title: \"Failed!\",\n                        text: 'Something went wrong, please try again',\n                        icon: \"error\",\n                      });\n                })\n            } \n          });\n    }\n    return (\n        <div>\n            { description ?\n            <div className=\"userReviewBox\">\n                <div className=\"review col-md-6 mx-auto\">\n                    { img ? <img src={img} alt=\"\"/>:\n                    <img src={`${userImg}`} alt=\"\"/>}\n                    <h5 className=\"testimonialName\">{name}</h5>\n                    <h6 className=\"testimonialAddress\">{address}</h6>\n                    <p><i>{description}</i></p>\n                </div>\n                <Button as={Link} to={`/dashboard/review/${_id}`} variant=\"outline-success\"> <FontAwesomeIcon icon={faEdit}/> Edit</Button>\n                <Button variant=\"outline-danger\" onClick={() => handleDelete(_id)}> <FontAwesomeIcon icon={faTrashAlt}/> Delete</Button>\n            </div>\n            :\n            <ReviewForm setIsUpdated={setIsUpdated}/> \n            }\n        </div>\n    );\n};\n\nexport default Review;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}